//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ../android/src/main/kotlin/lib/org/bouncycastle/crypto/digests/Blake2sDigest.java
//

#include "Arrays.h"
#include "Blake2sDigest.h"
#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "Pack.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/System.h"

@interface LibOrgBouncycastleCryptoDigestsBlake2sDigest () {
 @public
  jint digestLength_;
  jint keyLength_;
  IOSByteArray *salt_;
  IOSByteArray *personalization_;
  IOSByteArray *key_;
  IOSByteArray *buffer_;
  jint bufferPos_;
  IOSIntArray *internalState_;
  IOSIntArray *chainValue_;
  jint t0_;
  jint t1_;
  jint f0_;
}

- (void)init__ OBJC_METHOD_FAMILY_NONE;

- (void)initializeInternalState OBJC_METHOD_FAMILY_NONE;

- (void)compressWithByteArray:(IOSByteArray *)message
                      withInt:(jint)messagePos;

- (void)GWithInt:(jint)m1
         withInt:(jint)m2
         withInt:(jint)posA
         withInt:(jint)posB
         withInt:(jint)posC
         withInt:(jint)posD;

- (jint)rotr32WithInt:(jint)x
              withInt:(jint)rot;

@end

J2OBJC_FIELD_SETTER(LibOrgBouncycastleCryptoDigestsBlake2sDigest, salt_, IOSByteArray *)
J2OBJC_FIELD_SETTER(LibOrgBouncycastleCryptoDigestsBlake2sDigest, personalization_, IOSByteArray *)
J2OBJC_FIELD_SETTER(LibOrgBouncycastleCryptoDigestsBlake2sDigest, key_, IOSByteArray *)
J2OBJC_FIELD_SETTER(LibOrgBouncycastleCryptoDigestsBlake2sDigest, buffer_, IOSByteArray *)
J2OBJC_FIELD_SETTER(LibOrgBouncycastleCryptoDigestsBlake2sDigest, internalState_, IOSIntArray *)
J2OBJC_FIELD_SETTER(LibOrgBouncycastleCryptoDigestsBlake2sDigest, chainValue_, IOSIntArray *)

inline IOSIntArray *LibOrgBouncycastleCryptoDigestsBlake2sDigest_get_blake2s_IV(void);
static IOSIntArray *LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV;
J2OBJC_STATIC_FIELD_OBJ_FINAL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, blake2s_IV, IOSIntArray *)

inline IOSObjectArray *LibOrgBouncycastleCryptoDigestsBlake2sDigest_get_blake2s_sigma(void);
static IOSObjectArray *LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma;
J2OBJC_STATIC_FIELD_OBJ_FINAL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, blake2s_sigma, IOSObjectArray *)

inline jint LibOrgBouncycastleCryptoDigestsBlake2sDigest_get_ROUNDS(void);
#define LibOrgBouncycastleCryptoDigestsBlake2sDigest_ROUNDS 10
J2OBJC_STATIC_FIELD_CONSTANT(LibOrgBouncycastleCryptoDigestsBlake2sDigest, ROUNDS, jint)

inline jint LibOrgBouncycastleCryptoDigestsBlake2sDigest_get_BLOCK_LENGTH_BYTES(void);
#define LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES 64
J2OBJC_STATIC_FIELD_CONSTANT(LibOrgBouncycastleCryptoDigestsBlake2sDigest, BLOCK_LENGTH_BYTES, jint)

__attribute__((unused)) static void LibOrgBouncycastleCryptoDigestsBlake2sDigest_init__(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self);

__attribute__((unused)) static void LibOrgBouncycastleCryptoDigestsBlake2sDigest_initializeInternalState(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self);

__attribute__((unused)) static void LibOrgBouncycastleCryptoDigestsBlake2sDigest_compressWithByteArray_withInt_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, IOSByteArray *message, jint messagePos);

__attribute__((unused)) static void LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, jint m1, jint m2, jint posA, jint posB, jint posC, jint posD);

__attribute__((unused)) static jint LibOrgBouncycastleCryptoDigestsBlake2sDigest_rotr32WithInt_withInt_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, jint x, jint rot);

J2OBJC_INITIALIZED_DEFN(LibOrgBouncycastleCryptoDigestsBlake2sDigest)

@implementation LibOrgBouncycastleCryptoDigestsBlake2sDigest

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (instancetype)initWithLibOrgBouncycastleCryptoDigestsBlake2sDigest:(LibOrgBouncycastleCryptoDigestsBlake2sDigest *)digest {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithLibOrgBouncycastleCryptoDigestsBlake2sDigest_(self, digest);
  return self;
}

- (instancetype)initWithInt:(jint)digestBits {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithInt_(self, digestBits);
  return self;
}

- (instancetype)initWithByteArray:(IOSByteArray *)key {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithByteArray_(self, key);
  return self;
}

- (instancetype)initWithByteArray:(IOSByteArray *)key
                          withInt:(jint)digestBytes
                    withByteArray:(IOSByteArray *)salt
                    withByteArray:(IOSByteArray *)personalization {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithByteArray_withInt_withByteArray_withByteArray_(self, key, digestBytes, salt, personalization);
  return self;
}

- (void)init__ {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_init__(self);
}

- (void)initializeInternalState {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_initializeInternalState(self);
}

- (void)updateWithByte:(jbyte)b {
  jint remainingLength;
  remainingLength = LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES - bufferPos_;
  if (remainingLength == 0) {
    t0_ += LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES;
    if (t0_ == 0) {
      t1_++;
    }
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_compressWithByteArray_withInt_(self, buffer_, 0);
    LibOrgBouncycastleUtilArrays_fillWithByteArray_withByte_(buffer_, (jbyte) 0);
    *IOSByteArray_GetRef(nil_chk(buffer_), 0) = b;
    bufferPos_ = 1;
  }
  else {
    *IOSByteArray_GetRef(nil_chk(buffer_), bufferPos_) = b;
    bufferPos_++;
  }
}

- (void)updateWithByteArray:(IOSByteArray *)message
                    withInt:(jint)offset
                    withInt:(jint)len {
  if (message == nil || len == 0) {
    return;
  }
  jint remainingLength = 0;
  if (bufferPos_ != 0) {
    remainingLength = LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES - bufferPos_;
    if (remainingLength < len) {
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(message, offset, buffer_, bufferPos_, remainingLength);
      t0_ += LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES;
      if (t0_ == 0) {
        t1_++;
      }
      LibOrgBouncycastleCryptoDigestsBlake2sDigest_compressWithByteArray_withInt_(self, buffer_, 0);
      bufferPos_ = 0;
      LibOrgBouncycastleUtilArrays_fillWithByteArray_withByte_(buffer_, (jbyte) 0);
    }
    else {
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(message, offset, buffer_, bufferPos_, len);
      bufferPos_ += len;
      return;
    }
  }
  jint messagePos;
  jint blockWiseLastPos = offset + len - LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES;
  for (messagePos = offset + remainingLength; messagePos < blockWiseLastPos; messagePos += LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES) {
    t0_ += LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES;
    if (t0_ == 0) {
      t1_++;
    }
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_compressWithByteArray_withInt_(self, message, messagePos);
  }
  JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(message, messagePos, buffer_, 0, offset + len - messagePos);
  bufferPos_ += offset + len - messagePos;
}

- (jint)doFinalWithByteArray:(IOSByteArray *)outArg
                     withInt:(jint)outOffset {
  f0_ = (jint) 0xFFFFFFFF;
  t0_ += bufferPos_;
  if ((t0_ < 0) && (bufferPos_ > -t0_)) {
    t1_++;
  }
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_compressWithByteArray_withInt_(self, buffer_, 0);
  LibOrgBouncycastleUtilArrays_fillWithByteArray_withByte_(buffer_, (jbyte) 0);
  LibOrgBouncycastleUtilArrays_fillWithIntArray_withInt_(internalState_, 0);
  for (jint i = 0; i < ((IOSIntArray *) nil_chk(chainValue_))->size_ && (i * 4 < digestLength_); i++) {
    IOSByteArray *bytes = LibOrgBouncycastleUtilPack_intToLittleEndianWithInt_(IOSIntArray_Get(chainValue_, i));
    if (i * 4 < digestLength_ - 4) {
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(bytes, 0, outArg, outOffset + i * 4, 4);
    }
    else {
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(bytes, 0, outArg, outOffset + i * 4, digestLength_ - (i * 4));
    }
  }
  LibOrgBouncycastleUtilArrays_fillWithIntArray_withInt_(chainValue_, 0);
  [self reset];
  return digestLength_;
}

- (void)reset {
  bufferPos_ = 0;
  f0_ = 0;
  t0_ = 0;
  t1_ = 0;
  chainValue_ = nil;
  LibOrgBouncycastleUtilArrays_fillWithByteArray_withByte_(buffer_, (jbyte) 0);
  if (key_ != nil) {
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(key_, 0, buffer_, 0, key_->size_);
    bufferPos_ = LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES;
  }
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_init__(self);
}

- (void)compressWithByteArray:(IOSByteArray *)message
                      withInt:(jint)messagePos {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_compressWithByteArray_withInt_(self, message, messagePos);
}

- (void)GWithInt:(jint)m1
         withInt:(jint)m2
         withInt:(jint)posA
         withInt:(jint)posB
         withInt:(jint)posC
         withInt:(jint)posD {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(self, m1, m2, posA, posB, posC, posD);
}

- (jint)rotr32WithInt:(jint)x
              withInt:(jint)rot {
  return LibOrgBouncycastleCryptoDigestsBlake2sDigest_rotr32WithInt_withInt_(self, x, rot);
}

- (NSString *)getAlgorithmName {
  return @"BLAKE2s";
}

- (jint)getDigestSize {
  return digestLength_;
}

- (jint)getByteLength {
  return LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES;
}

- (void)clearKey {
  if (key_ != nil) {
    LibOrgBouncycastleUtilArrays_fillWithByteArray_withByte_(key_, (jbyte) 0);
    LibOrgBouncycastleUtilArrays_fillWithByteArray_withByte_(buffer_, (jbyte) 0);
  }
}

- (void)clearSalt {
  if (salt_ != nil) {
    LibOrgBouncycastleUtilArrays_fillWithByteArray_withByte_(salt_, (jbyte) 0);
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 1, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 2, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 3, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 4, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 5, 6, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 5, 7, -1, -1, -1, -1 },
    { NULL, "I", 0x1, 8, 9, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 10, 9, -1, -1, -1, -1 },
    { NULL, "V", 0x2, 11, 12, -1, -1, -1, -1 },
    { NULL, "I", 0x2, 13, 14, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(initWithLibOrgBouncycastleCryptoDigestsBlake2sDigest:);
  methods[2].selector = @selector(initWithInt:);
  methods[3].selector = @selector(initWithByteArray:);
  methods[4].selector = @selector(initWithByteArray:withInt:withByteArray:withByteArray:);
  methods[5].selector = @selector(init__);
  methods[6].selector = @selector(initializeInternalState);
  methods[7].selector = @selector(updateWithByte:);
  methods[8].selector = @selector(updateWithByteArray:withInt:withInt:);
  methods[9].selector = @selector(doFinalWithByteArray:withInt:);
  methods[10].selector = @selector(reset);
  methods[11].selector = @selector(compressWithByteArray:withInt:);
  methods[12].selector = @selector(GWithInt:withInt:withInt:withInt:withInt:withInt:);
  methods[13].selector = @selector(rotr32WithInt:withInt:);
  methods[14].selector = @selector(getAlgorithmName);
  methods[15].selector = @selector(getDigestSize);
  methods[16].selector = @selector(getByteLength);
  methods[17].selector = @selector(clearKey);
  methods[18].selector = @selector(clearSalt);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "blake2s_IV", "[I", .constantValue.asLong = 0, 0x1a, -1, 15, -1, -1 },
    { "blake2s_sigma", "[[B", .constantValue.asLong = 0, 0x1a, -1, 16, -1, -1 },
    { "ROUNDS", "I", .constantValue.asInt = LibOrgBouncycastleCryptoDigestsBlake2sDigest_ROUNDS, 0x1a, -1, -1, -1, -1 },
    { "BLOCK_LENGTH_BYTES", "I", .constantValue.asInt = LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES, 0x1a, -1, -1, -1, -1 },
    { "digestLength_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "keyLength_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "salt_", "[B", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "personalization_", "[B", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "key_", "[B", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "buffer_", "[B", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "bufferPos_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "internalState_", "[I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "chainValue_", "[I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "t0_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "t1_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "f0_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LLibOrgBouncycastleCryptoDigestsBlake2sDigest;", "I", "[B", "[BI[B[B", "init", "update", "B", "[BII", "doFinal", "[BI", "compress", "G", "IIIIII", "rotr32", "II", &LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, &LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma };
  static const J2ObjcClassInfo _LibOrgBouncycastleCryptoDigestsBlake2sDigest = { "Blake2sDigest", "lib.org.bouncycastle.crypto.digests", ptrTable, methods, fields, 7, 0x1, 19, 16, -1, -1, -1, -1, -1 };
  return &_LibOrgBouncycastleCryptoDigestsBlake2sDigest;
}

+ (void)initialize {
  if (self == [LibOrgBouncycastleCryptoDigestsBlake2sDigest class]) {
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV = [IOSIntArray newArrayWithInts:(jint[]){ (jint) 0x6a09e667, (jint) 0xbb67ae85, (jint) 0x3c6ef372, (jint) 0xa54ff53a, (jint) 0x510e527f, (jint) 0x9b05688c, (jint) 0x1f83d9ab, (jint) 0x5be0cd19 } count:8];
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma = [IOSObjectArray newArrayWithObjects:(id[]){ [IOSByteArray newArrayWithBytes:(jbyte[]){ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 } count:16], [IOSByteArray newArrayWithBytes:(jbyte[]){ 14, 10, 4, 8, 9, 15, 13, 6, 1, 12, 0, 2, 11, 7, 5, 3 } count:16], [IOSByteArray newArrayWithBytes:(jbyte[]){ 11, 8, 12, 0, 5, 2, 15, 13, 10, 14, 3, 6, 7, 1, 9, 4 } count:16], [IOSByteArray newArrayWithBytes:(jbyte[]){ 7, 9, 3, 1, 13, 12, 11, 14, 2, 6, 5, 10, 4, 0, 15, 8 } count:16], [IOSByteArray newArrayWithBytes:(jbyte[]){ 9, 0, 5, 7, 2, 4, 10, 15, 14, 1, 11, 12, 6, 8, 3, 13 } count:16], [IOSByteArray newArrayWithBytes:(jbyte[]){ 2, 12, 6, 10, 0, 11, 8, 3, 4, 13, 7, 5, 15, 14, 1, 9 } count:16], [IOSByteArray newArrayWithBytes:(jbyte[]){ 12, 5, 1, 15, 14, 13, 4, 10, 0, 7, 6, 3, 9, 2, 8, 11 } count:16], [IOSByteArray newArrayWithBytes:(jbyte[]){ 13, 11, 7, 14, 12, 1, 3, 9, 5, 0, 15, 4, 8, 6, 2, 10 } count:16], [IOSByteArray newArrayWithBytes:(jbyte[]){ 6, 15, 14, 9, 11, 3, 0, 8, 12, 2, 13, 7, 1, 4, 10, 5 } count:16], [IOSByteArray newArrayWithBytes:(jbyte[]){ 10, 2, 8, 4, 7, 6, 1, 5, 15, 11, 9, 14, 3, 12, 13, 0 } count:16] } count:10 type:IOSClass_byteArray(1)];
    J2OBJC_SET_INITIALIZED(LibOrgBouncycastleCryptoDigestsBlake2sDigest)
  }
}

@end

void LibOrgBouncycastleCryptoDigestsBlake2sDigest_init(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self) {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithInt_(self, 256);
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *new_LibOrgBouncycastleCryptoDigestsBlake2sDigest_init() {
  J2OBJC_NEW_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, init)
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *create_LibOrgBouncycastleCryptoDigestsBlake2sDigest_init() {
  J2OBJC_CREATE_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, init)
}

void LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithLibOrgBouncycastleCryptoDigestsBlake2sDigest_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, LibOrgBouncycastleCryptoDigestsBlake2sDigest *digest) {
  NSObject_init(self);
  self->digestLength_ = 32;
  self->keyLength_ = 0;
  self->salt_ = nil;
  self->personalization_ = nil;
  self->key_ = nil;
  self->buffer_ = nil;
  self->bufferPos_ = 0;
  self->internalState_ = [IOSIntArray newArrayWithLength:16];
  self->chainValue_ = nil;
  self->t0_ = 0;
  self->t1_ = 0;
  self->f0_ = 0;
  self->bufferPos_ = ((LibOrgBouncycastleCryptoDigestsBlake2sDigest *) nil_chk(digest))->bufferPos_;
  self->buffer_ = LibOrgBouncycastleUtilArrays_cloneWithByteArray_(digest->buffer_);
  self->keyLength_ = digest->keyLength_;
  self->key_ = LibOrgBouncycastleUtilArrays_cloneWithByteArray_(digest->key_);
  self->digestLength_ = digest->digestLength_;
  self->chainValue_ = LibOrgBouncycastleUtilArrays_cloneWithIntArray_(digest->chainValue_);
  self->personalization_ = LibOrgBouncycastleUtilArrays_cloneWithByteArray_(digest->personalization_);
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *new_LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithLibOrgBouncycastleCryptoDigestsBlake2sDigest_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *digest) {
  J2OBJC_NEW_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, initWithLibOrgBouncycastleCryptoDigestsBlake2sDigest_, digest)
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *create_LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithLibOrgBouncycastleCryptoDigestsBlake2sDigest_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *digest) {
  J2OBJC_CREATE_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, initWithLibOrgBouncycastleCryptoDigestsBlake2sDigest_, digest)
}

void LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithInt_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, jint digestBits) {
  NSObject_init(self);
  self->digestLength_ = 32;
  self->keyLength_ = 0;
  self->salt_ = nil;
  self->personalization_ = nil;
  self->key_ = nil;
  self->buffer_ = nil;
  self->bufferPos_ = 0;
  self->internalState_ = [IOSIntArray newArrayWithLength:16];
  self->chainValue_ = nil;
  self->t0_ = 0;
  self->t1_ = 0;
  self->f0_ = 0;
  if (digestBits < 8 || digestBits > 256 || digestBits % 8 != 0) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"BLAKE2s digest bit length must be a multiple of 8 and not greater than 256");
  }
  self->buffer_ = [IOSByteArray newArrayWithLength:LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES];
  self->keyLength_ = 0;
  self->digestLength_ = digestBits / 8;
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_init__(self);
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *new_LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithInt_(jint digestBits) {
  J2OBJC_NEW_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, initWithInt_, digestBits)
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *create_LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithInt_(jint digestBits) {
  J2OBJC_CREATE_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, initWithInt_, digestBits)
}

void LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithByteArray_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, IOSByteArray *key) {
  NSObject_init(self);
  self->digestLength_ = 32;
  self->keyLength_ = 0;
  self->salt_ = nil;
  self->personalization_ = nil;
  self->key_ = nil;
  self->buffer_ = nil;
  self->bufferPos_ = 0;
  self->internalState_ = [IOSIntArray newArrayWithLength:16];
  self->chainValue_ = nil;
  self->t0_ = 0;
  self->t1_ = 0;
  self->f0_ = 0;
  self->buffer_ = [IOSByteArray newArrayWithLength:LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES];
  if (key != nil) {
    if (key->size_ > 32) {
      @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"Keys > 32 are not supported");
    }
    self->key_ = [IOSByteArray newArrayWithLength:key->size_];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(key, 0, self->key_, 0, key->size_);
    self->keyLength_ = key->size_;
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(key, 0, self->buffer_, 0, key->size_);
    self->bufferPos_ = LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES;
  }
  self->digestLength_ = 32;
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_init__(self);
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *new_LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithByteArray_(IOSByteArray *key) {
  J2OBJC_NEW_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, initWithByteArray_, key)
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *create_LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithByteArray_(IOSByteArray *key) {
  J2OBJC_CREATE_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, initWithByteArray_, key)
}

void LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithByteArray_withInt_withByteArray_withByteArray_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, IOSByteArray *key, jint digestBytes, IOSByteArray *salt, IOSByteArray *personalization) {
  NSObject_init(self);
  self->digestLength_ = 32;
  self->keyLength_ = 0;
  self->salt_ = nil;
  self->personalization_ = nil;
  self->key_ = nil;
  self->buffer_ = nil;
  self->bufferPos_ = 0;
  self->internalState_ = [IOSIntArray newArrayWithLength:16];
  self->chainValue_ = nil;
  self->t0_ = 0;
  self->t1_ = 0;
  self->f0_ = 0;
  self->buffer_ = [IOSByteArray newArrayWithLength:LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES];
  if (digestBytes < 1 || digestBytes > 32) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"Invalid digest length (required: 1 - 32)");
  }
  self->digestLength_ = digestBytes;
  if (salt != nil) {
    if (salt->size_ != 8) {
      @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"Salt length must be exactly 8 bytes");
    }
    self->salt_ = [IOSByteArray newArrayWithLength:8];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(salt, 0, self->salt_, 0, salt->size_);
  }
  if (personalization != nil) {
    if (personalization->size_ != 8) {
      @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"Personalization length must be exactly 8 bytes");
    }
    self->personalization_ = [IOSByteArray newArrayWithLength:8];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(personalization, 0, self->personalization_, 0, personalization->size_);
  }
  if (key != nil) {
    if (key->size_ > 32) {
      @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"Keys > 32 bytes are not supported");
    }
    self->key_ = [IOSByteArray newArrayWithLength:key->size_];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(key, 0, self->key_, 0, key->size_);
    self->keyLength_ = key->size_;
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(key, 0, self->buffer_, 0, key->size_);
    self->bufferPos_ = LibOrgBouncycastleCryptoDigestsBlake2sDigest_BLOCK_LENGTH_BYTES;
  }
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_init__(self);
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *new_LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithByteArray_withInt_withByteArray_withByteArray_(IOSByteArray *key, jint digestBytes, IOSByteArray *salt, IOSByteArray *personalization) {
  J2OBJC_NEW_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, initWithByteArray_withInt_withByteArray_withByteArray_, key, digestBytes, salt, personalization)
}

LibOrgBouncycastleCryptoDigestsBlake2sDigest *create_LibOrgBouncycastleCryptoDigestsBlake2sDigest_initWithByteArray_withInt_withByteArray_withByteArray_(IOSByteArray *key, jint digestBytes, IOSByteArray *salt, IOSByteArray *personalization) {
  J2OBJC_CREATE_IMPL(LibOrgBouncycastleCryptoDigestsBlake2sDigest, initWithByteArray_withInt_withByteArray_withByteArray_, key, digestBytes, salt, personalization)
}

void LibOrgBouncycastleCryptoDigestsBlake2sDigest_init__(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self) {
  if (self->chainValue_ == nil) {
    self->chainValue_ = [IOSIntArray newArrayWithLength:8];
    *IOSIntArray_GetRef(self->chainValue_, 0) = IOSIntArray_Get(nil_chk(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV), 0) ^ (self->digestLength_ | (JreLShift32(self->keyLength_, 8)) | (jint) 0x1010000);
    *IOSIntArray_GetRef(self->chainValue_, 1) = IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 1);
    *IOSIntArray_GetRef(self->chainValue_, 2) = IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 2);
    *IOSIntArray_GetRef(self->chainValue_, 3) = IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 3);
    *IOSIntArray_GetRef(self->chainValue_, 4) = IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 4);
    *IOSIntArray_GetRef(self->chainValue_, 5) = IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 5);
    if (self->salt_ != nil) {
      *IOSIntArray_GetRef(self->chainValue_, 4) ^= LibOrgBouncycastleUtilPack_littleEndianToIntWithByteArray_withInt_(self->salt_, 0);
      *IOSIntArray_GetRef(nil_chk(self->chainValue_), 5) ^= LibOrgBouncycastleUtilPack_littleEndianToIntWithByteArray_withInt_(self->salt_, 4);
    }
    *IOSIntArray_GetRef(nil_chk(self->chainValue_), 6) = IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 6);
    *IOSIntArray_GetRef(self->chainValue_, 7) = IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 7);
    if (self->personalization_ != nil) {
      *IOSIntArray_GetRef(self->chainValue_, 6) ^= LibOrgBouncycastleUtilPack_littleEndianToIntWithByteArray_withInt_(self->personalization_, 0);
      *IOSIntArray_GetRef(nil_chk(self->chainValue_), 7) ^= LibOrgBouncycastleUtilPack_littleEndianToIntWithByteArray_withInt_(self->personalization_, 4);
    }
  }
}

void LibOrgBouncycastleCryptoDigestsBlake2sDigest_initializeInternalState(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self) {
  JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(self->chainValue_, 0, self->internalState_, 0, ((IOSIntArray *) nil_chk(self->chainValue_))->size_);
  JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 0, self->internalState_, ((IOSIntArray *) nil_chk(self->chainValue_))->size_, 4);
  *IOSIntArray_GetRef(nil_chk(self->internalState_), 12) = self->t0_ ^ IOSIntArray_Get(nil_chk(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV), 4);
  *IOSIntArray_GetRef(self->internalState_, 13) = self->t1_ ^ IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 5);
  *IOSIntArray_GetRef(self->internalState_, 14) = self->f0_ ^ IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 6);
  *IOSIntArray_GetRef(self->internalState_, 15) = IOSIntArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_IV, 7);
}

void LibOrgBouncycastleCryptoDigestsBlake2sDigest_compressWithByteArray_withInt_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, IOSByteArray *message, jint messagePos) {
  LibOrgBouncycastleCryptoDigestsBlake2sDigest_initializeInternalState(self);
  IOSIntArray *m = [IOSIntArray newArrayWithLength:16];
  for (jint j = 0; j < 16; j++) {
    *IOSIntArray_GetRef(m, j) = LibOrgBouncycastleUtilPack_littleEndianToIntWithByteArray_withInt_(message, messagePos + j * 4);
  }
  for (jint round = 0; round < LibOrgBouncycastleCryptoDigestsBlake2sDigest_ROUNDS; round++) {
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(self, IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma), round)), 0)), IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 1)), 0, 4, 8, 12);
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(self, IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 2)), IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 3)), 1, 5, 9, 13);
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(self, IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 4)), IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 5)), 2, 6, 10, 14);
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(self, IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 6)), IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 7)), 3, 7, 11, 15);
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(self, IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 8)), IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 9)), 0, 5, 10, 15);
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(self, IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 10)), IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 11)), 1, 6, 11, 12);
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(self, IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 12)), IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 13)), 2, 7, 8, 13);
    LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(self, IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 14)), IOSIntArray_Get(m, IOSByteArray_Get(nil_chk(IOSObjectArray_Get(LibOrgBouncycastleCryptoDigestsBlake2sDigest_blake2s_sigma, round)), 15)), 3, 4, 9, 14);
  }
  for (jint offset = 0; offset < ((IOSIntArray *) nil_chk(self->chainValue_))->size_; offset++) {
    *IOSIntArray_GetRef(self->chainValue_, offset) = IOSIntArray_Get(self->chainValue_, offset) ^ IOSIntArray_Get(nil_chk(self->internalState_), offset) ^ IOSIntArray_Get(self->internalState_, offset + 8);
  }
}

void LibOrgBouncycastleCryptoDigestsBlake2sDigest_GWithInt_withInt_withInt_withInt_withInt_withInt_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, jint m1, jint m2, jint posA, jint posB, jint posC, jint posD) {
  *IOSIntArray_GetRef(nil_chk(self->internalState_), posA) = IOSIntArray_Get(self->internalState_, posA) + IOSIntArray_Get(self->internalState_, posB) + m1;
  *IOSIntArray_GetRef(self->internalState_, posD) = LibOrgBouncycastleCryptoDigestsBlake2sDigest_rotr32WithInt_withInt_(self, IOSIntArray_Get(self->internalState_, posD) ^ IOSIntArray_Get(self->internalState_, posA), 16);
  *IOSIntArray_GetRef(nil_chk(self->internalState_), posC) = IOSIntArray_Get(self->internalState_, posC) + IOSIntArray_Get(self->internalState_, posD);
  *IOSIntArray_GetRef(self->internalState_, posB) = LibOrgBouncycastleCryptoDigestsBlake2sDigest_rotr32WithInt_withInt_(self, IOSIntArray_Get(self->internalState_, posB) ^ IOSIntArray_Get(self->internalState_, posC), 12);
  *IOSIntArray_GetRef(nil_chk(self->internalState_), posA) = IOSIntArray_Get(self->internalState_, posA) + IOSIntArray_Get(self->internalState_, posB) + m2;
  *IOSIntArray_GetRef(self->internalState_, posD) = LibOrgBouncycastleCryptoDigestsBlake2sDigest_rotr32WithInt_withInt_(self, IOSIntArray_Get(self->internalState_, posD) ^ IOSIntArray_Get(self->internalState_, posA), 8);
  *IOSIntArray_GetRef(nil_chk(self->internalState_), posC) = IOSIntArray_Get(self->internalState_, posC) + IOSIntArray_Get(self->internalState_, posD);
  *IOSIntArray_GetRef(self->internalState_, posB) = LibOrgBouncycastleCryptoDigestsBlake2sDigest_rotr32WithInt_withInt_(self, IOSIntArray_Get(self->internalState_, posB) ^ IOSIntArray_Get(self->internalState_, posC), 7);
}

jint LibOrgBouncycastleCryptoDigestsBlake2sDigest_rotr32WithInt_withInt_(LibOrgBouncycastleCryptoDigestsBlake2sDigest *self, jint x, jint rot) {
  return (JreURShift32(x, rot)) | (JreLShift32(x, (32 - rot)));
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(LibOrgBouncycastleCryptoDigestsBlake2sDigest)
